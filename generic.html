<!DOCTYPE html>
<html>
  <head>
    <title>Portfolio by Carla Viteri</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript
      ><link rel="stylesheet" href="assets/css/noscript.css"
    /></noscript>
    <style>
      .assignment-image {
        max-width: 600px;
        width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
      }

      .iframe-container {
        margin: 2em 0;
        position: relative;
        width: 100%;
      }

      .iframe-container h3,
      .iframe-container p {
        text-align: justify;
        margin: 0.5em 0;
      }

      .iframe-wrapper-1 {
        width: 80%;
        height: 580px;
        margin-bottom: 0;
        margin-top: 50;
        border: none;
        display: block;
      }

      .iframe-wrapper-2 {
        width: 100%;
        height: 800px;
        margin-bottom: 10;
        margin-top: 50;
        border: none;
        display: block;
      }

      .iframe-wrapper-3 {
        width: 100%;
        height: 660px;
        margin-bottom: 10;
        margin-top: 50;
        border: none;
        display: block;
      }

      .iframe-container iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
      }

      .content-section {
        padding: 20px;
        background: #f4f4f4;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .content-section h3 {
        margin-top: 0;
      }
    </style>
  </head>
  <body class="is-preload">
    <!-- Wrapper -->
    <div id="wrapper">
      <!-- Header -->
      <header id="header">
        <div class="inner">
          <!-- Logo -->
          <a href="index.html" class="logo">
            <span class="symbol"><img src="images/logo02.svg" alt="" /></span>
            <span class="title">CSI 5900: Data Visualization</span>
          </a>

          <!-- Nav -->
          <nav>
            <ul>
              <li><a href="#menu">Menu</a></li>
            </ul>
          </nav>
        </div>
      </header>

      <!-- Menu -->
      <nav id="menu">
        <h2>Menu</h2>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li>
            <a href="javascript:void(0);" onclick="loadContent(1);"
              >Assignment 1</a
            >
          </li>
          <li>
            <a href="javascript:void(0);" onclick="loadContent(2);"
              >Assignment 2</a
            >
          </li>
          <li>
            <a href="javascript:void(0);" onclick="loadContent(3);"
              >Assignment 3</a
            >
          </li>
          <li>
            <a href="javascript:void(0);" onclick="loadContent(4);"
              >Assignment 4</a
            >
          </li>
          <li>
            <a href="javascript:void(0);" onclick="loadContent(5);"
              >Assignment 5</a
            >
          </li>
          <li><a href="project.html">Project</a></li>
        </ul>
      </nav>

      <!-- Main -->
      <div id="main">
        <div class="inner">
          <div id="content">
            <!-- Dynamic Content will be injected here -->
          </div>
        </div>
      </div>

      <!-- Footer -->
      <footer id="footer">
        <div class="inner">
          <section>
            <h2>Follow</h2>
            <ul class="icons">
              <li>
                <a
                  href="https://github.com/carlaviteri18/data-vis-portfolio"
                  class="icon brands style2 fa-github"
                >
                  <span class="label">GitHub</span>
                </a>
              </li>
            </ul>
          </section>
          <ul class="copyright">
            <li>&copy; Carla Viteri. All rights reserved</li>
            <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
          </ul>
        </div>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script>
      const assignments = [
        {
          id: 1,
          title: "Assignment 1",
          description:
            "This assignment is centered on crafting various visual representations to effectively demonstrate differences in key data attributes. By adjusting plot types, scales, and colors, the goal is to transform complex data into clear, practical insights that are straightforward to interpret and use. For this analysis, I have selected a <a href='https://www.kaggle.com/datasets/ghassenkhaled/wine-quality-data' target='_blank'>dataset</a> that examines the detailed characteristics of wines, focusing on alcohol content and color. I’m specifically analyzing two columns: 'M', which categorizes the wine by color (red or white), and 'K', which quantifies alcohol content by percentage. This targeted approach lets me visualize and compare how alcohol levels vary between red and white wines, enhancing my ability to interpret and communicate these variations through graphical means.",
          images: [
            {
              src: "images/a1_basicplot.JPG",
              title: "Basic Plot",
              description:
                "For the basic plot, I opted for a side-by-side bar chart to distinctly showcase the distributions of alcohol content between red and white wines across various intervals. This format supports direct comparison, effectively highlighting trends and differences without the visual confusion that can arise from stacked charts. By choosing a vivid red-wine color to represent red wine and a beige color for white wine, I enhance the visual clarity and intuitive understanding of the data. This deliberate choice of colors not only mirrors the actual colors of the wines but also makes it easier for anyone looking at the chart to quickly grasp which wine typically reaches higher alcohol levels. My goal is to present these insights in a way that is instantly understandable, ensuring that the visualizations are effective and informative for anyone reviewing this assignment.",
            },
            {
              src: "images/a1_plotvar1.JPG",
              title: "Plot Variation 1",
              description:
                "In this plot variation, I employed a logarithmic scale on the y-axis to enhance visibility across a broad range of data frequencies. This scale is particularly useful for emphasizing smaller counts that might be overshadowed by larger values in a linear display. By setting a minimum value above zero for the log scale, I avoided undefined values and ensured a clearer, more accurate representation of the distribution of wine colors across alcohol content intervals. This adjustment makes it easier to observe and analyze both minor and major trends within the data facilitating a deeper understanding of the distribution dynamics within the wine samples.",
            },
            {
              src: "images/a1_plotvar2.JPG",
              title: "Plot Variation 2",
              description:
                "I selected bright red and bright blue colors to represent red and white wines, respectively. This choice not only increases the visual contrast between the two categories but also aligns intuitively with common color associations—red for red wine and a starkly different blue to represent white wine, diverging from the typical lighter shades often associated with white wine. This enhances the chart's readability and ensures that viewers can quickly grasp the differences in distribution across intervals. This color variation can be especially useful in presentations or public settings where quick, clear comprehension is necessary and where color accurate displays are not always available.",
            },
            {
              src: "images/a1_plotvar3.JPG",
              title: "Plot Variation 3",
              description:
                "For the third variation, I switched to a stacked area chart to highlight the cumulative contribution of red and white wines across different alcohol content intervals. This approach not only allows us to view the individual trends of each wine color but also their combined effect, offering a visual summary of total alcohol distribution by color. The choice of using different colors within the stacked layers helps differentiate the contributions of each wine type, making it clearer how each influences the overall pattern across the spectrum of alcohol content. This visualization is effective for spotting trends in wine composition and understanding the dynamics between the two wine colors over varying alcohol strengths.",
            },
          ],
        },
        {
          id: 2,
          title: "Assignment 2",
          description:
            "This assignment is all about creating a clear, visually appealing, and informative visualization using Vega-Lite. I've chosen to work with a <a href='https://github.com/shadfrigui/vega-lite/blob/main/adolescent-birth-rate/adolescent-birth-rate-data.json' target='_blank'>dataset</a> from the United Nations that tracks adolescent birth rates across different regions of the world over several time periods. This data is particularly interesting because it highlights significant changes in birth rates among young women aged 15-19 from 1950 to 2055. For this assignment, my goal was to redesign a problematic visualization, making it easier to read and more engaging. I focused on enhancing readability, improving color schemes, and ensuring that the data is presented in a way that highlights trends and differences across regions and time periods. This process involved adjusting the layout, adding informative tooltips, and making the legend more accessible.",
          images: [
            {
              src: "images/a2_visualization_bad.html",
              title: "Before Makeover☠",
              description:
                "The original visualization, which aimed to plot birth rates across three distinct time periods (1950-1955, 2000-2005, and 2050-2055) grouped by continent, was problematic for several reasons. The chart connected these periods with straight lines, implying a continuous trend, which is misleading given the significant time gaps and likely differences in the data collection or prediction methods. The line chart format did not effectively convey the separate time periods or highlight the changes within each continent distinctly. Additionally, the colors used were not sufficiently differentiated, causing confusion and making it difficult to quickly associate each color with the corresponding time period. The legend placement and overall layout further contributed to the cluttered and unclear presentation, failing to emphasize the key insights about birth rate trends over time.",
            },
            {
              src: "images/a2_visualization_makeover4.html",
              title: "After Makeover💅",
              description:
                "In the improved visualization, I addressed these issues by adopting a bar chart format that better represents discrete data points across the different time periods. Each stack of bars represent a specific period whilst each individual bar represents a specific continent clearly distinguished by distinct and intuitive colors. This format eliminates the misleading connections between time periods and emphasizes the individual data points. I also improved the legend placement and ensured it was clearly integrated with the chart, making it easier to understand which color corresponds to which time period. Additionally, I adjusted the layout to reduce clutter, improving readability and allowing for quick comprehension of the key trends in adolescent birth rates across continents over time. This revised visualization provides a much clearer, more accurate representation of the data, effectively communicating the significant trends in birth rates across different regions and time periods.",
            },
          ],
        },
        {
          id: 3,
          title: "Assignment 3",
          description: `
            <div class="content-section">
              <h3>Overview</h3>
              <p>This assignment focuses on visualizing and analyzing abortion appointment wait times across different states in the United States using Tableau. The goal is to create an interactive dashboard that provides insights into the geographic distribution of wait times and the availability of abortion services.</p>
            </div>
            <div class="content-section">
              <h3>Dataset</h3>
              <p>The dataset used contains information on abortion appointment wait times and the number of abortion providers for each state. Key columns include:</p>
              <ul>
                <li>State</li>
                <li>Median Wait Time (days)</li>
                <li>Minimum and Maximum Wait Times (days)</li>
                <li>Number of Abortion Providers</li>
              </ul>
            </div>
            <div class="content-section">
              <h3>Dashboard Overview</h3>
              <p>The dashboard consists of two main visualizations:</p>
              <ol>
                <li>
                  <strong>Map-Based Visualization</strong>
                  <p><strong>Title</strong>: "Median Abortion Appointment Wait Times by State"</p>
                  <p><strong>Description</strong>: This map shows the median wait times for abortion appointments across states, with color coding representing different wait times and circle sizes indicating the number of providers.</p>
                  <p><strong>Interactive Features</strong>: Hover over states to see detailed information.</p>
                </li>
                <li>
                  <strong>Bar Chart Visualization</strong>
                  <p><strong>Title</strong>: "Abortion Appointment Wait Times and Providers by State"</p>
                  <p><strong>Description</strong>: This bar chart compares median wait times across states, with bars color-coded by the number of abortion providers.</p>
                  <p><strong>Interactive Features</strong>: Click on bars to highlight corresponding states on the map.</p>
                </li>
              </ol>
            </div>
            <div class="content-section">
              <h3>User Instructions</h3>
              <p><strong>Explore the Map</strong>: Hover over a state to see the median, minimum, and maximum wait times, as well as the number of abortion providers.</p>
              <p><strong>Interact with the Bar Chart</strong>: Click on a bar to highlight the corresponding state on the map. This helps in understanding the geographic context of the wait times.</p>
            </div>
            <div class="content-section">
              <p>This dashboard provides a clear and interactive way to understand abortion appointment wait times and service availability across the United States, facilitating data-driven insights and decisions.</p>
            </div>`,
          tableau: `
            <div class='tableauPlaceholder' id='viz1717111014158' style='position: relative'>
              <noscript>
                <a href='#'><img alt='Dashboard 1 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;as&#47;assignment3_17170944420130&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
                <param name='embed_code_version' value='3' /> 
                <param name='site_root' value='' />
                <param name='name' value='assignment3_17170944420130&#47;Dashboard1' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;as&#47;assignment3_17170944420130&#47;Dashboard1&#47;1.png' /> 
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>`,
        },
        {
          id: 4,
          title: "Assignment 4",
          description: `
              <h2>Liar Liar</h2>

            <div class="content-section">
              <h4>Overview</h4>
              <p>The purpose of this assignment is to demonstrate how data visualizations can be used to accurately represent data or, alternatively, to mislead viewers by manipulating visual elements, highlighting the importance of ethical practices in data presentation.</p>
            </div>
            
            <div class="content-section">
              <h4>Dataset Description</h4>
              <p>The <a href="https://github.com/fivethirtyeight/data/blob/master/food-world-cup/food-world-cup-data.csv">dataset</a> used contains survey responses where participants rated their liking for traditional cuisines from various countries, including demographic information.</p>
            </div>
            
            <div class="content-section">
              <h4>Visualization 1: Accurate Average Ratings by Cuisine</h4>
              <p><strong>Description:</strong><br>
              This bar chart presents the average ratings for the traditional cuisines of Italy, Mexico, and Japan. Each bar represents the mean rating given by respondents for each cuisine, providing a clear and straightforward comparison. The y-axis starts at 0, ensuring an accurate depiction of the differences in ratings.</p>
              <p><strong>Approach:</strong><br>
              1. <strong>Data Preparation:</strong> Calculated the average ratings for Italy, Mexico, and Japan using the respective survey responses.<br>
              2. <strong>Visualization Creation:</strong> Created a bar chart with "Cuisine" on the x-axis and "Average Rating" on the y-axis.<br>
              3. <strong>Customization:</strong> Assigned distinct colors to each bar and added labels to display the average rating values. Ensured the y-axis starts at 0 to maintain an accurate visual comparison.<br>
              4. <strong>Title and Legends:</strong> Named the visualization "Accurate Average Ratings by Cuisine" and updated the legend to "Cuisine Types".</p>
            </div>
            
            <div class="content-section">
              <h4>Visualization 2: Misleading Average Ratings by Cuisine</h4>
              <p><strong>Description:</strong><br>
              This bar chart also shows the average ratings for the traditional cuisines of Italy, Mexico, and Japan, but with a manipulated y-axis. The y-axis starts at 3.5 instead of 0, exaggerating the differences between the cuisines and potentially misleading the viewer into thinking the differences are more significant than they are.</p>
              <p><strong>Approach:</strong><br>
              1. <strong>Data Preparation:</strong> Used the same average ratings calculated for Italy, Mexico, and Japan.<br>
              2. <strong>Visualization Creation:</strong> Created a bar chart similar to the first visualization.<br>
              3. <strong>Manipulation:</strong> Adjusted the y-axis to start at 3.5 and go up to 5.0, exaggerating the differences between the ratings.<br>
              4. <strong>Customization:</strong> Maintained the same colors and labels for consistency but manipulated the scale to emphasize the visual impact.<br>
              5. <strong>Title and Legends:</strong> Named the visualization "Misleading Average Ratings by Cuisine" and updated the legend to "Cuisine Types (Scaled)".</p>
            </div>
            
            <div class="content-section">
              <h4>The Ease of Misleading with Data Visualizations</h4>
              <p>Creating misleading visualizations is alarmingly easy. By simply manipulating visual elements such as the axis scale, colors, or even the context provided in titles and legends, one can significantly alter the perception of the data. The second visualization in this dashboard demonstrates how an adjusted y-axis can exaggerate minor differences, making them appear more substantial than they are. This example showcases the importance of ethical data visualization practices and critical viewing. Viewers should always consider the scales and context of visualizations to avoid being misled by manipulated presentations of data. I believe an ethical visualization must ensure transparency and accuracy, fostering trust and informed decision-making.</p>
            </div>`,
          tableau: `
            <div class='tableauPlaceholder' id='viz1717649544639' style='position: relative'>
              <noscript>
                <a href='#'><img alt='Visualizing Cuisine Preferences ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;as&#47;assignment4_17176455841450&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a>
              </noscript>
              <object class='tableauViz'  style='display:none;'>
                <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
                <param name='embed_code_version' value='3' /> 
                <param name='site_root' value='' />
                <param name='name' value='assignment4_17176455841450&#47;Dashboard1' />
                <param name='tabs' value='no' />
                <param name='toolbar' value='yes' />
                <param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;as&#47;assignment4_17176455841450&#47;Dashboard1&#47;1.png' /> 
                <param name='animate_transition' value='yes' />
                <param name='display_static_image' value='yes' />
                <param name='display_spinner' value='yes' />
                <param name='display_overlay' value='yes' />
                <param name='display_count' value='yes' />
                <param name='language' value='en-US' />
              </object>
            </div>`,
        },
        {
          id: 5,
          title: "🍑🍒🍓Assignment 5🌿🥕🌱",
          description: `
            <div class="content-section">
              <h3>Comprehensive Guide to Creating Custom Interactive Plots with Bokeh</h3>
              <p>In this guide, we will walk through the steps of creating interactive plots using Bokeh. We will start with a simple example and then move on to a more complex example using real data from the <a href="https://docs.google.com/spreadsheets/d/1uA2IQ_uMLmvEZa64P3ZVMkoGGM8qMqIWAfRYsnyhGRc/edit?gid=755727048#gid=755727048"> Stardew Valley dataset. </a></p>
              <h4>Step 1: Install Bokeh</h4>
              <p>Ensure you have Bokeh installed. Bokeh is a powerful visualization library that helps you create interactive and visually appealing plots. You can install it using pip:</p>
              <pre><code>pip install bokeh</code></pre>
              <h4>Step 2: Import Required Libraries</h4>
              <p>First, import the necessary libraries. These libraries are essential for creating and customizing plots:</p>
              <pre><code>from bokeh.plotting import figure, output_file, show, save
from bokeh.models import ColumnDataSource, HoverTool, Slider
from bokeh.layouts import column
import pandas as pd</code></pre>
                  <li><strong>bokeh.plotting</strong>: Provides functions to create and manipulate plots.</li>
                  <li><strong>bokeh.models</strong>: Contains various tools and widgets like ColumnDataSource, HoverTool, Slider, and CustomJS.</li>
                  <li><strong>bokeh.layouts</strong>: Used to arrange plots and widgets in a layout.</li>
                  <li><strong>pandas</strong>: A powerful data manipulation library.</li>
            </div>
            
            <div class="content-section">
              <h4>Simple Plot Tutorial</h4>
              <h5>Step 3: Prepare Data</h5>
              <p>We start with a simple dataset. This step involves creating a dictionary with data that we will use for our plots. The dataset includes x-values, y-values for the line plot, y-values for the bar chart, and labels.</p>
              <pre><code>data = {
    'x': [1, 2, 3, 4, 5],
    'y_line': [6, 7, 2, 4, 5],
    'y_bar': [1, 4, 3, 2, 6],
    'label': ['A', 'B', 'C', 'D', 'E']
}</code></pre>
              <h5>Step 4: Create and Customize Line Plot</h5>
              <p>Create a line plot using the prepared data. This involves setting up the data source, defining the plot, and customizing its appearance.</p>
              <pre><code>source_line = ColumnDataSource(data=data)
p_line = figure(title="Line Plot", x_axis_label='X-Axis', y_axis_label='Y-Axis', tooltips=[("Label", "@label"), ("(x,y)", "($x, $y)")])
p_line.line('x', 'y_line', line_width=2, source=source_line, legend_label="Line", color="#CBBAED")
p_line.circle('x', 'y_line', size=10, source=source_line, color="#01FDF6", alpha=0.5, legend_label="Line")
p_line.title.text_font_size = '20pt'
p_line.title.align = 'center'
p_line.xaxis.axis_label_text_font_size = "14pt"
p_line.yaxis.axis_label_text_font_size = "14pt"
p_line.xgrid.grid_line_color = None
p_line.ygrid.grid_line_color = None
p_line.legend.title = 'Legend'
p_line.legend.title_text_font_style = "bold"
p_line.legend.label_text_font_size = "10pt"
p_line.legend.location = "top_left"
p_line.legend.background_fill_alpha = 0.4
p_line.legend.label_standoff = 5

output_file("line_plot.html")
save(p_line)
show(p_line)</code></pre>
                <li><strong>ColumnDataSource</strong>: This is the data source for the plot.</li>
                <li><strong>figure()</strong>: Creates a new plot with the specified title, axis labels, and tooltips.</li>
                <li><strong>line() and circle()</strong>: Adds a line and circles to the plot, representing the data points.</li>
                <li><strong>Customizations</strong>: Adjusting font sizes, alignments, and grid lines for better appearance.</li>
              <div class="iframe-container">
                <h3>Line Plot</h3>
                <div class="iframe-wrapper-1">
                  <iframe src="images/line_plot.html" scrolling="no" allowtransparency="true" allowfullscreen="true" frameborder="0"></iframe>
                </div>
              </div>
            </div>
            
            <div class="content-section">
              <h5>Step 5: Create and Customize Bar Chart</h5>
              <p>Create a bar chart using the same data. This step is similar to creating the line plot but uses bars instead.</p>
              <pre><code>source_bar = ColumnDataSource(data=data)
p_bar = figure(title="Bar Chart", x_axis_label='X-Axis', y_axis_label='Y-Axis', tooltips=[("Label", "@label"), ("(x,y)", "($x, $y)")])
p_bar.vbar(x='x', top='y_bar', width=0.5, source=source_bar, legend_label="Bar", color="#EC9A29", alpha=0.6)
p_bar.title.text_font_size = '20pt'
p_bar.title.align = 'center'
p_bar.xaxis.axis_label_text_font_size = "14pt"
p_bar.yaxis.axis_label_text_font_size = "14pt"
p_bar.xgrid.grid_line_color = None
p_bar.ygrid.grid_line_color = None
p_bar.legend.title = 'Legend'
p_bar.legend.title_text_font_style = "bold"
p_bar.legend.label_text_font_size = "10pt"
p_bar.legend.location = "top_left"
p_bar.legend.background_fill_alpha = 0.4
p_bar.legend.label_standoff = 5

output_file("bar_chart.html")
save(p_bar)
show(p_bar)</code></pre>
                <li><strong>vbar()</strong>: Adds vertical bars to the plot to represent the data points.</li>
                <li><strong>Customizations</strong>:  Similar to the line plot, we adjust the font sizes, alignments, and grid lines.</li>
              <div class="iframe-container">
                <h3>Bar Chart</h3>
                <div class="iframe-wrapper-1">
                  <iframe src="images/bar_chart.html" scrolling="no" allowtransparency="true" allowfullscreen="true" frameborder="0"></iframe>
                </div>
              </div>
            </div>
            
            <div class="content-section">
              <h5>Step 6: Create and Customize Combined Plot</h5>
              <p>Combine the line and bar charts into a single plot. This involves creating a combined plot and adding both line and bar elements.</p>
              <pre><code>source_combined = ColumnDataSource(data=data)
p_combined = figure(title="Combined Plot", x_axis_label='X-Axis', y_axis_label='Y-Axis', tooltips=[("Label", "@label"), ("(x,y)", "($x, $y)")])
p_combined.line('x', 'y_line', line_width=2, source=source_combined, legend_label="Line", color="#CBBAED")
p_combined.circle('x', 'y_line', size=10, source=source_combined, color="#01FDF6", alpha=0.5, legend_label="Line")
p_combined.vbar(x='x', top='y_bar', width=0.5, source=source_combined, legend_label="Bar", color="#EC9A29", alpha=0.6)
p_combined.title.text_font_size = '20pt'
p_combined.title.align = 'center'
p_combined.xaxis.axis_label_text_font_size = "14pt"
p_combined.yaxis.axis_label_text_font_size = "14pt"
p_combined.xgrid.grid_line_color = None
p_combined.ygrid.grid_line_color = None
p_combined.legend.title = 'Legend'
p_combined.legend.title_text_font_style = "bold"
p_combined.legend.label_text_font_size = "10pt"
p_combined.legend.location = "top_left"
p_combined.legend.background_fill_alpha = 0.4
p_combined.legend.label_standoff = 5

# Create slider widget
slider = Slider(start=0, end=10, value=5, step=1, title="Slider")

# Create layout with widget
layout = column(p_combined, slider)

# Save and show combined plot
output_file("bokeh_custom_plot.html")
save(layout)
show(layout)</code></pre>
                <li><strong>vbar() and line()</strong>: Adds both bars and lines to the plot.</li>
                <li><strong>Slider</strong>:  A widget to interact with the plot. In this example, it does not change the plot but demonstrates how to add interactive elements.</li>

              <div class="iframe-container">
                <h3>Combined Plot</h3>
                <div class="iframe-wrapper-3">
                  <iframe src="images/bokeh_custom_plot.html" scrolling="no" allowtransparency="true" allowfullscreen="true" frameborder="0"></iframe>
                </div>
                <p>The slider widget is included for potential interactivity. In more complex visualizations, the slider can be used to dynamically filter data, adjust parameters, or animate the plot. In this example, it is included to demonstrate how to add a slider to the layout.</p>
              </div>
            </div>
            
            <div class="content-section">
              <h4>Stardew Valley Plot Tutorial</h4>
              <h5>Step 7: Load and Prepare Your Data</h5>
              <p>We'll load the data from the provided <a href="https://docs.google.com/spreadsheets/d/1uA2IQ_uMLmvEZa64P3ZVMkoGGM8qMqIWAfRYsnyhGRc/edit?gid=755727048#gid=755727048"> spreadsheet </a>, manually assign column names, convert the 'Plant' column to a categorical type to ensure the plot can use it effectively, filter to include only "Fruit" in the "Plant" column, sort by 'Sell Price 1' in descending order, and create a combined plot with horizontal bars and a line plot.</p>
              <pre><code># Load the data
file_path = '/content/Stardew Valley - The Spreadsheet_update4.xlsx'
sheet_name = 'Summer Crops'
df = pd.read_excel(file_path, sheet_name=sheet_name, header=None)

# Manually assign column names
df.columns = [
    'Category', 'Plant', 'Seed Price', 'Sell Price 1', 'Sell Price 2', 'Sell Price 3', 
    'Preserve', 'Keg', 'Days', 'Yield', 'Profit', 'Profit/d', 'Reharvest', 
    'Profit/Season', 'Harvests', 'Profit/Season/d', 'Place', 'Continuous', 'Notes'
]

# Filter the relevant columns, rows with complete data, and only 'Fruit' category
df = df[df['Category'] == 'Fruit'][['Plant', 'Sell Price 1', 'Profit', 'Days']].dropna()

# Sort by 'Sell Price 1' in descending order
df = df.sort_values(by='Sell Price 1', ascending=False)

# Convert 'Plant' to a categorical type for plotting
df['Plant'] = df['Plant'].astype('category')

# Create a ColumnDataSource from the DataFrame
source = ColumnDataSource(df)</code></pre>
              <h5>Step 8: Create and Customize Combined Plot</h5>
              <p>We'll create a combined plot that includes both horizontal bars and a line plot, and add a slider to filter the data based on the minimum 'Sell Price 1' value.</p>

              <p>1. <strong>Initialize the Plot</strong>: Create a figure for the combined plot with customizations for appearance.</p>
              <p>2. <strong>Add Horizontal Bars</strong>: Add horizontal bars to represent the 'Profit' for each plant.</p>
              <p>3. <strong>Add Line and Circle Elements:</strong>: Add a line and circles to represent 'Sell Price 1' for each plant.</p>
              <p>4. <strong>Customize Plot Appearance:</strong>: Set the title, axis labels, and legend properties for better readability.</p>
              <p>5. <strong>Create Slider Widget:</strong>: Add a slider widget to filter the data based on 'Sell Price 1'.</p>
              <p>6. <strong>Add JavaScript Callback:</strong>: Attach a JavaScript callback to the slider to filter the data dynamically.
                  <li><strong>CustomJS</strong>: This code filters the data to include only crops with a 'Sell Price 1' greater than or equal to the slider's value.</li>
              </p>
              <p>7. <strong>Create Layout with Widget:</strong>: Combine the plot and the slider into a single layout.</p>
              <p>8. <strong>Save and Show Combined Plot:</strong>: Save the combined plot to an HTML file and display it.</p>

              <pre><code>p_combined = figure(
    title="Stardew Valley Summer Fruit Crop Sales",
    y_axis_label='Plant',
    x_axis_label='Amount',
    tooltips=[("Plant", "@Plant"), ("(x,y)", "($x, $y)")],
    y_range=df['Plant'].cat.categories.tolist(),
    width=800
)
p_combined.hbar(y='Plant', right='Profit', height=0.5, source=source, legend_label="Profit", color="#EC9A29", alpha=0.6)
p_combined.line('Sell Price 1', 'Plant', line_width=2, source=source, legend_label="Sell Price", color="#CBBAED")
p_combined.circle('Sell Price 1', 'Plant', size=10, source=source, color="#01FDF6", alpha=0.5, legend_label="Sell Price")
p_combined.title.text_font_size = '16pt'
p_combined.title.align = 'center'
p_combined.xaxis.axis_label_text_font_size = "14pt"
p_combined.yaxis.axis_label_text_font_size = "14pt"
p_combined.xgrid.grid_line_color = None
p_combined.ygrid.grid_line_color = None
p_combined.legend.title = 'Legend'
p_combined.legend.title_text_font_style = "bold"
p_combined.legend.label_text_font_size = "10pt"
p_combined.legend.location = "top_right"
p_combined.legend.background_fill_alpha = 0.4
p_combined.legend.label_standoff = 5

# Create slider widget
slider = Slider(start=0, end=1000, value=0, step=10, title="Minimum Sell Price 1")

# Add a JavaScript callback to filter the data based on the slider value
callback = CustomJS(args=dict(source=source, original_source=source.data), code="""
    var data = source.data;
    var original_data = original_source;
    var value = cb_obj.value;
    data['Plant'] = [];
    data['Sell Price 1'] = [];
    data['Profit'] = [];
    data['Days'] = [];
    for (var i = 0; i < original_data['Plant'].length; i++) {
        if (original_data['Sell Price 1'][i] >= value) {
            data['Plant'].push(original_data['Plant'][i]);
            data['Sell Price 1'].push(original_data['Sell Price 1'][i]);
            data['Profit'].push(original_data['Profit'][i]);
            data['Days'].push(original_data['Days'][i]);
        }
    }
    source.change.emit();
""")
slider.js_on_change('value', callback)

# Create layout with widget
layout = column(p_combined, slider)

# Save and show combined plot
output_file("bokeh_stardew_valley_fruit_horizontal_bars_descending_plot.html")
save(layout)
show(layout)
</code></pre>
              <div class="iframe-container">
                <h3>Stardew Valley Combined Plot</h3>
                <div class="iframe-wrapper-3">
                  <iframe src="images/stardewvalley.html" scrolling="no" allowtransparency="true" allowfullscreen="true" frameborder="0"></iframe>
                </div>
                <p>The slider widget in the Stardew Valley plot allows users to dynamically filter the displayed data based on a specified minimum "Sell Price" value. This interactivity enhances the plot by enabling users to focus on crops that meet or exceed a certain sell price threshold.</p>
              </div>
            </div>
            
            <div class="content-section">
              <h4>Conclusion</h4>
              <p>This comprehensive guide has walked through creating interactive plots using Bokeh. Starting with simple examples, we progressed to using real data from the Stardew Valley dataset, demonstrating how to filter, sort, and visualize data effectively. By following these steps, you can create informative and visually appealing visualizations tailored to your data and requirements.</p>
            </div>`,
        },
      ];

      function loadContent(assignmentId) {
        const assignment = assignments.find((ass) => ass.id === assignmentId);
        if (assignment) {
          const contentDiv = document.getElementById("content");
          let imagesHtml = assignment.images
            ? assignment.images
                .map((img, index) =>
                  img.src.endsWith(".html")
                    ? `<div class="iframe-container"><h3>${
                        img.title
                      }</h3><div class="iframe-wrapper-${
                        index + 1
                      }"><iframe id="iframe-${index}" src="${
                        img.src
                      }" scrolling="no" allowtransparency="true" allowfullscreen="true" frameborder="0"></iframe></div><p>${
                        img.description
                      }</p></div>`
                    : `<div class="image style1"><h3>${img.title}</h3><img src="${img.src}" alt="${img.title}" class="assignment-image"/><p>${img.description}</p></div>`
                )
                .join("")
            : "";
          const tableauHtml = assignment.tableau
            ? `<div class="iframe-container">${assignment.tableau}</div>`
            : "";

          contentDiv.innerHTML = `
                    <header>
                        <h1>${assignment.title}</h1>
                    </header>
                    <div>${assignment.description}</div>
                    ${imagesHtml}
                    ${tableauHtml}
                `;
          // Update URL without reloading the page
          history.pushState(
            { id: assignmentId },
            `${assignment.title}`,
            `?assignment=${assignmentId}`
          );

          // Ensure all iframes resize correctly
          if (assignment.images) {
            assignment.images.forEach((img, index) => {
              if (img.src.endsWith(".html")) {
                const iframe = document.getElementById(`iframe-${index}`);
                iframe.onload = function () {
                  resizeIframe(iframe);
                };
              }
            });
          }

          // Initialize Tableau visualization if it exists
          if (assignment.tableau) {
            initTableauViz();
          }
        }
      }

      function resizeIframe(iframe) {
        try {
          const iframeContent = iframe.contentWindow.document.documentElement;
          const height = iframeContent.scrollHeight;
          iframe.style.height = height + "px";
        } catch (error) {
          console.error("Error resizing iframe:", error);
        }
      }

      function initTableauViz() {
        var divElement =
          document.getElementById("viz1717111014158") ||
          document.getElementById("viz1717649544639");
        var vizElement = divElement.getElementsByTagName("object")[0];
        if (divElement.offsetWidth > 800) {
          vizElement.style.width = "1000px";
          vizElement.style.height = "827px";
        } else if (divElement.offsetWidth > 500) {
          vizElement.style.width = "1000px";
          vizElement.style.height = "827px";
        } else {
          vizElement.style.width = "100%";
          vizElement.style.height = "827px";
        }
        var scriptElement = document.createElement("script");
        scriptElement.src =
          "https://public.tableau.com/javascripts/api/viz_v1.js";
        vizElement.parentNode.insertBefore(scriptElement, vizElement);
      }

      // Optionally load an assignment if a specific query is passed
      window.addEventListener("DOMContentLoaded", (event) => {
        const urlParams = new URLSearchParams(window.location.search);
        const assignmentId = urlParams.get("assignment");
        if (assignmentId) {
          loadContent(parseInt(assignmentId));
        }
      });
    </script>
  </body>
</html>
